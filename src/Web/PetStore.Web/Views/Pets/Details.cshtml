@using System.Text
@using PetStore.Common
@using PetStore.Data.Models.Common
@model PetStore.Web.ViewModels.Pets.PetDetailsViewModel

@{
    this.ViewData["Title"] = $"{this.Model.Name}";
}

@if (this.Model.UserMessage != null)
{
    <h1 style="text-align:center; padding: 8px; border: 8px solid green; background-color:yellowgreen;">
        <i>@this.Model.UserMessage</i>
    </h1>   
    <br/>
}

<h1 style="text-align:center"><strong>@this.ViewData["Title"]</strong></h1>
<h4 style="text-align:center; color: gray"><i>Type: @this.Model.Type</i></h4>
<div class="d-flex justify-content-center container mt-3">
    <div class="card p-3" style="background-color: #F7F7F7;"><i class="fa fa-apple"></i>
        <div class="about-product text-center mt-2 mb-2"><img src="@this.Model.ImageUrl" width="600" alt="No image"></div>
        <div style="font-size: 18pt; text-align:center"><i><strong>Breed:</strong></i> @this.Model.Breed</div>
        <div style="font-size: 18pt; text-align:center"><i><strong>Gender:</strong></i> @this.Model.GenderInTextFormat</div>
        <div style="font-size: 18pt; text-align:center"><i><strong>Age:</strong></i> @this.Model.AgeInTextFormat</div>
        <div style="font-size: 18pt; text-align:center"><i><strong>Date of birth:</strong></i> @this.Model.BirthDate.ToString(GlobalConstants.PetBirthDateFormat)</div>
        <div class="mt-2" style="color: darkorange; font-size: 20pt; text-align:center; font-weight: bold">Price: @Math.Round(this.Model.Price, 2) $</div>
        @if(this.User.Identity.IsAuthenticated)
        {
            <div style="text-align:center">
                <a class="btn btn-success mb-5" style="font-size: 18pt;" asp-action="">Add to Card</a>
            </div>
        }
        else
        {
            <div style="text-align:center">
                <a class="btn btn-success mb-5" style="font-size: 18pt;" asp-area="Identity" asp-controller="Account" asp-action="Login">Fast Purchase</a>
            </div>
        }
        <div class="mb-3" style="text-align:center"> 
            <a class="btn btn-dark" style="font-size: 16pt; float: left" asp-controller="Pets" asp-action="Index">All Pets</a>
            <a class="btn btn-info" style="font-size: 16pt; float: right" asp-controller="Pets" asp-action="TypePets" asp-route-name="@this.Model.TypeName">More @this.Model.TypePlural</a>
        </div>
        @if (this.User.IsInRole(GlobalConstants.AdministratorRoleName))
        {
            <p class="d-flex justify-content-center container mt-3">
                <div style="color: black; font-size: 18pt; text-align:center; font-size:20pt; padding: 8px; border: 8px solid lightgray; background-color:lightgray; border-radius: 3px">
                    <i><strong>Administration settings</strong></i>
                </div>
                <div class="card p-3 bg-white">
                    <i class="fa fa-apple"></i>
                    <div style="color: black; font-size: 18pt; text-align:center">
                        <p><i><strong>Created on</strong></i> @this.Model.CreatedOn.ToString(GlobalConstants.AdministrationSettingsDateTimeFormat)</p>
                        @if (this.Model.ModifiedOn != null)
                        {
                            <p style="color: black; font-size: 18pt; text-align:center"><i><strong>Last changes was made on</strong></i> @this.Model.ModifiedOn.Value.ToString(GlobalConstants.AdministrationSettingsDateTimeFormat)</p>
                        }
                        <br/>
                    </div>
                    <p class="d-grid gap-2 col-6 mx-auto">
                        <a class="btn btn-secondary" style="font-size: 16pt;" asp-area="Administration" asp-controller="PetsManager" asp-action="Editpet" asp-route-id="@this.Model.Id">Edit</a>
                        <a class="btn btn-danger" style="font-size: 16pt;" onclick="return confirm('Remove @this.Model.Name from the shtop?');" asp-area="Administration" asp-controller="PetsManager" asp-action="DeletePet" asp-route-id="@this.Model.Id">Remove Pet</a>
                    <input class="btn btn-dark" style="font-size: 16pt;" value="Back" onclick="history.back()">
                    </p>
                </div>
            </p>
        }  
    </div>
</div>




